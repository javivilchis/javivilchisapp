<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    
    <meta name="format-detection" content="telephone=no" />
    <meta name="msapplication-tap-highlight" content="no" />
    <meta name="viewport" content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width" />
    <!-- This is a wide open CSP declaration. To lock this down for production, see below. -->
    <meta http-equiv="Content-Security-Policy" content="default-src * 'unsafe-inline' gap:; style-src 'self' 'unsafe-inline'; media-src *" />
 
    <link rel="stylesheet" type="text/css" href="css/index.css" />
    <title>Javivilchis Pimped out app</title>
    <link rel="manifest" href="/manifest.json">
</head>

<body>
    <div class="app">
        <h1>PhoneGap Pimp</h1>
        <div id="deviceready" class="blink">
            <p class="event listening">Connecting to Device</p>
            <p class="event received">My Device is a pimp!</p>
        </div>
    </div>
   

<!-- The core Firebase JS SDK is always required and must be listed first -->
<!-- script src="js/firebase-app.js"></script -->
<!-- Add the entire Firebase JavaScript SDK -->
<script src="https://www.gstatic.com/firebasejs/6.3.0/firebase.js"></script>
<!-- script src="https://www.gstatic.com/firebasejs/6.3.0/firebase-messaging.js"></script -->
<!-- TODO: Add SDKs for Firebase products that you want to use
    https://firebase.google.com/docs/web/setup#config-web-app -->

<script>
// Your web app's Firebase configuration
var config = {
    apiKey: "AIzaSyB6dAkDfLqA790njRSb64IAB9-BmPI6fJY",
    authDomain: "push-test-jav.firebaseapp.com",
    databaseURL: "https://push-test-jav.firebaseio.com",
    projectId: "push-test-jav",
    storageBucket: "push-test-jav.appspot.com",
    messagingSenderId: "971122330221",
    appId: "1:971122330221:web:90872652bf6e2c6b"
};
// Initialize Firebase    
firebase.initializeApp(config);

const messaging = firebase.messaging();
messaging.usePublicVapidKey("BEud0BSSpNsKd_FJCU5dVdxbBQ9kJFUczaDD5BCihsNbDORKWWiHKmTmwGmjPbp56tsBJowypo7aFJkW4AMJlV4");
messaging.onMessage(function(payload){
    console.log('onMessage: ', payload);
}).
Notification.requestPermission().then((permission) => {
  if (permission === 'granted') {
    console.log('Notification permission granted.');
    // TODO(developer): Retrieve an Instance ID token for use with FCM.
    // ...
  } else {
    console.log('Unable to get permission to notify.');
  }
});

/*
messaging.requestPermission()
.then(function(){       
    console.log('Have Permision, yes!');
    return messaging.getToken();
})
.then(function(token){
    console.log(token);
})
.catch(function(err){
   
    console.log('Error occured, crap!');
})
*/
</script>

    <script type="text/javascript" src="cordova.js"></script>
    <script type="text/javascript" src="js/index.js"></script>
    <script type="text/javascript">
        app.initialize();
    </script>



</body>

</html>
